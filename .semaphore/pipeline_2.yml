version: v1.0
name: Deploy
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: Generate Release
    dependencies: []
    task:
      jobs:
        - name: Run Semantic Release
          commands:
            - 'true'
  - name: Deploy iOS
    dependencies:
      - Generate Release
    task:
      env_vars:
        - name: LANG
          value: en_US.UTF-8
        - name: RUNNER_TEMP_PATH
          value: /Users/semaphore
      jobs:
        - name: Fastlane deploy
          commands:
            - 'true'
  - name: Deploy Android
    dependencies:
      - Generate Release
    task:
      env_vars:
        - name: LANG
          value: en_US.UTF-8
        - name: RUNNER_TEMP_PATH
          value: /Users/semaphore
        - name: ROOT_PATH
          value: /root/YourProjectFolder
      jobs:
        - name: Fastlane deploy
          commands:
            - 'true'
