version: v1.0
name: Initial Pipeline
agent:
  machine:
    type: a1-standard-4
    os_image: macos-xcode15
blocks:
  - name: Build
    task:
      jobs:
        - name: Compile
          commands:
            - checkout
    dependencies: []
  - name: Unit tests
    task:
      jobs:
        - name: Unit tests
          commands: []
          parallelism: 8
    dependencies:
      - Build
  - name: Integration Tests
    task:
      jobs:
        - name: 'Integration #1'
          commands: []
          parallelism: 4
    dependencies:
      - Unit tests
  - name: End-to-end tests
    task:
      jobs:
        - name: 'E2E #1'
          commands: []
          parallelism: 2
    dependencies:
      - Integration Tests
  - name: Generate diagrams
    dependencies:
      - Build
    task:
      jobs:
        - name: Structurizr
          commands: []
